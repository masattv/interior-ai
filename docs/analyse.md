## 1. プロジェクト概要
- **サービス名**：Interior AI
- **目的**：部屋写真のみをもとにAIが部屋寸法を推定し、Gemini APIで生成した内装プランを比較表示
- **開発形態**：個人開発／低コスト

## 2. MVP（最小実用プロダクト）範囲
1. **AI部屋寸法推定（Gemini API）**
2. **AI内装プラン生成（Gemini API）**
3. **生成結果表示**

## 3. 機能要件  
### 3.1 AI部屋寸法推定（Gemini API）
- バックエンドで信頼度を判定し、低信頼度の場合は「再度お試しください」のメッセージを表示  
- 同一画像の再推定は**キャッシュ**を優先  

### 3.2 AI内装プラン生成（Gemini API）
- プロンプト設計とリクエスト管理（APIキー／レート制限対応）  
- 生成画像を取得後キャッシュし、再生成の待ち時間とコストを削減  

### 3.3 生成結果表示
- 生成されたBefore／Afterイメージをサムネイルギャラリー形式で一覧表示  
- クリックで大判プレビューをポップアップ表示  
- 各画像に「保存」／「SNSシェア」ボタンを付与  

## 4. 非機能要件
- **レスポンス性能**：生成開始から5秒以内  
- **可用性**：単一サーバーでの稼働を前提  
- **セキュリティ**：HTTPS推奨（Let’s Encrypt）  
- **スケーラビリティ**：初期は同期処理、後にジョブキュー検討  
- **モニタリング**：API呼び出し数・レイテンシ・エラー率を可視化  

- **バックエンド**：TypeScript + Node.js（Express）  
- **フロントエンド**：TypeScript + Vue 3 + Vite  
- **主要ライブラリ**：  
  - HTTP：axios  
  - 画像処理：sharp（サーバー、必要時）  
  - 状態管理：pinia  
- **バージョン管理**：GitHub  

## 6. データ要件
- **テスト画像**：各部屋形状・光条件で10枚以上  
- **AIモデル**：Gemini API利用（ローカルモデル不要）  

## 7. ライセンス要件
- **API利用規約準拠**：Google Cloud Gemini API 利用規約に従う  
- **注意書き常設**：誤差範囲・API利用上限の説明を画面に表示  
- **同意取得**：アップロード時に肖像権・プライバシー同意チェックボックスを必須  

## 8. UI／UX要件
1. 写真アップロード画面のみ  
2. テイスト選択（手動／自動）  
3. 推定結果が低信頼度の場合は「再度お試しください」のメッセージを表示  
4. API処理中のプログレスバー表示  
5. 生成結果ギャラリー：サムネイル一覧＋プレビューモーダル  
6. 注意書き領域：誤差範囲・利用制限・利用規約リンクを常設  
7. 保存／SNSシェア機能  

## 9. 開発フロー
- 環境構築・APIキー管理設定  
- AI部屋寸法推定プロトタイプ実装  
- Gemini API連携パイプライン実装  
- 生成結果ギャラリー実装  
- 動作確認・README整備  

## 10. コスト要件
- **API費用**：Gemini API利用分のみ（無料枠内運用想定）  
- **人件費**：個人開発のためゼロ  

## 11. 運用＆リスク要件
- **誤差クレーム対策**：低信頼度時の再推定誘導  
- **APIレート制限リスク**：呼び出し数監視＋フェイルセーフ実装  
- **法務対応**：個人情報保護法・肖像権フロー整備  
